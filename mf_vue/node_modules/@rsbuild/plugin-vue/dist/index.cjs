"use strict";
let __rslib_import_meta_url__ = 'undefined' == typeof document ? new (require('url'.replace('', ''))).URL('file:' + __filename).href : document.currentScript && document.currentScript.src || new URL('main.js', document.baseURI).href;
var __webpack_require__ = {};
__webpack_require__.d = (exports1, definition)=>{
    for(var key in definition)__webpack_require__.o(definition, key) && !__webpack_require__.o(exports1, key) && Object.defineProperty(exports1, key, {
        enumerable: !0,
        get: definition[key]
    });
}, __webpack_require__.o = (obj, prop)=>Object.prototype.hasOwnProperty.call(obj, prop), __webpack_require__.r = (exports1)=>{
    'undefined' != typeof Symbol && Symbol.toStringTag && Object.defineProperty(exports1, Symbol.toStringTag, {
        value: 'Module'
    }), Object.defineProperty(exports1, '__esModule', {
        value: !0
    });
};
var __webpack_exports__ = {};
__webpack_require__.r(__webpack_exports__), __webpack_require__.d(__webpack_exports__, {
    PLUGIN_VUE_NAME: ()=>PLUGIN_VUE_NAME,
    pluginVue: ()=>pluginVue
});
let external_node_module_namespaceObject = require("node:module"), external_vue_loader_namespaceObject = require("vue-loader"), isPlainObject = (obj)=>null !== obj && 'object' == typeof obj && '[object Object]' === Object.prototype.toString.call(obj), applySplitChunksRule = (api, options = {
    vue: !0,
    router: !0
})=>{
    api.modifyBundlerChain((chain, { environment })=>{
        let { config } = environment;
        if ('split-by-experience' !== config.performance.chunkSplit.strategy) return;
        let currentConfig = chain.optimization.splitChunks.values();
        if (!isPlainObject(currentConfig)) return;
        let extraGroups = {};
        options.vue && (extraGroups.vue = {
            name: 'lib-vue',
            test: /node_modules[\\/](?:vue|vue-loader|@vue[\\/]shared|@vue[\\/]reactivity|@vue[\\/]runtime-dom|@vue[\\/]runtime-core)[\\/]/,
            priority: 0
        }), options.router && (extraGroups.router = {
            name: 'lib-router',
            test: /node_modules[\\/]vue-router[\\/]/,
            priority: 0
        }), Object.keys(extraGroups).length && chain.optimization.splitChunks({
            ...currentConfig,
            cacheGroups: {
                ...extraGroups,
                ...currentConfig.cacheGroups
            }
        });
    });
}, src_require = (0, external_node_module_namespaceObject.createRequire)(__rslib_import_meta_url__), PLUGIN_VUE_NAME = 'rsbuild:vue';
function pluginVue(options = {}) {
    return {
        name: PLUGIN_VUE_NAME,
        setup (api) {
            let VUE_REGEXP = /\.vue$/, CSS_MODULES_REGEX = /\.modules?\.\w+$/i;
            api.modifyEnvironmentConfig((config, { mergeEnvironmentConfig })=>{
                let merged = mergeEnvironmentConfig({
                    source: {
                        define: {
                            __VUE_OPTIONS_API__: !0,
                            __VUE_PROD_DEVTOOLS__: !1,
                            __VUE_PROD_HYDRATION_MISMATCH_DETAILS__: !1
                        },
                        include: [
                            /\.vue.js$/
                        ]
                    }
                }, config);
                return !0 === merged.output.cssModules.auto && (merged.output.cssModules.auto = (path, query)=>VUE_REGEXP.test(path) || path.includes('.vue.css') ? query.includes('type=style') && query.includes('module=true') : CSS_MODULES_REGEX.test(path)), merged;
            }), api.modifyBundlerChain(async (chain, { CHAIN_ID })=>{
                chain.resolve.extensions.add('.vue');
                let userLoaderOptions = options.vueLoaderOptions ?? {}, compilerOptions = {
                    preserveWhitespace: !1,
                    ...userLoaderOptions.compilerOptions
                }, vueLoaderOptions = {
                    experimentalInlineMatchResource: !0,
                    ...userLoaderOptions,
                    compilerOptions
                };
                chain.module.rule(CHAIN_ID.RULE.VUE).test(VUE_REGEXP).use(CHAIN_ID.USE.VUE).loader(src_require.resolve('vue-loader')).options(vueLoaderOptions), chain.module.rule(CHAIN_ID.RULE.CSS).test(/\.(?:css|postcss|pcss)$/), chain.plugin(CHAIN_ID.PLUGIN.VUE_LOADER_PLUGIN).before(CHAIN_ID.PLUGIN.REACT_FAST_REFRESH).use(external_vue_loader_namespaceObject.VueLoaderPlugin);
            }), applySplitChunksRule(api, options.splitChunks);
        }
    };
}
for(var __webpack_i__ in exports.PLUGIN_VUE_NAME = __webpack_exports__.PLUGIN_VUE_NAME, exports.pluginVue = __webpack_exports__.pluginVue, __webpack_exports__)-1 === [
    "PLUGIN_VUE_NAME",
    "pluginVue"
].indexOf(__webpack_i__) && (exports[__webpack_i__] = __webpack_exports__[__webpack_i__]);
Object.defineProperty(exports, '__esModule', {
    value: !0
});
